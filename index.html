<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IndexedDB & Service Worker Fix</title>
</head>
<body>
    <h1>IndexedDB & Service Worker Demo</h1>
    <script>
        // ---- IndexedDB Fix ----
        const request = indexedDB.open('myDatabase', 1);

        request.onupgradeneeded = function(event) {
            const db = event.target.result;
            if (!db.objectStoreNames.contains('myStore')) {
                db.createObjectStore('myStore', { keyPath: 'id' });
            }
        };

        request.onsuccess = function(event) {
            const db = event.target.result;
            const tx = db.transaction('myStore', 'readwrite');
            const store = tx.objectStore('myStore');
            store.put({ id: 1, name: 'Bhargav' });

            tx.oncomplete = () => console.log('IndexedDB transaction successful.');
            tx.onerror = (err) => console.error('IndexedDB transaction failed:', err);
        };

        request.onerror = function(event) {
            console.error('IndexedDB error:', event.target.errorCode);
        };

        // ---- Service Worker Fix ----
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
            .then(reg => console.log('Service Worker registered successfully:', reg))
            .catch(err => console.error('Service Worker registration failed:', err));
        }
    </script>


</body>
</html>




