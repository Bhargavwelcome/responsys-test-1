<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsys Web Push Test</title>
</head>
<body>
<h1>Responsys Web Push Demo</h1>
<p id="visitorIdDisplay">Visitor ID will appear here after registration.</p>

<script src="https://api.pushio.com/webpush/sdk/wpIndex_min.js"
wpconfig='{
  "appserviceKey": "BBfCgd8DzPawmPJgGJy8decXP1TJvDczsIpA0wqk961Xjb3auyJ9qMC2JwPT6XiRK429JsCDtWRgyLoaujPeGmE=",
  "apiKey": "ABEWBYcAAX3LV04gEHMQJ2xIs",
  "accountToken": "ABElKaqpK-3l_zDeOp-XArlkg",
  "apiHost": "https://abr16c0-webpush.oraclersys.com",
  "appver": "1.0.0",
  "lazy": false
}'>
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => {
      console.log('Service Worker registered');
      const waitSDK = setInterval(() => {
        if (typeof orawp !== "undefined") {
          clearInterval(waitSDK);
          orawp.registerForWebPush()
            .then(() => {
              document.getElementById("visitorIdDisplay").textContent =
                `Visitor ID: ${orawp.getVisitorId()}`;
            })
            .catch(console.error);
        }
      }, 500);
    })
    .catch(console.error);
}
</script>
</body>
</html>
